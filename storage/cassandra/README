
Cassandra Storage Backend
=========================

Thrift Library
--------------

You need the Apache Thrift library to access Cassandra. You probably have to
build it yourself.

Make sure you have all the dependencies. See http://thrift.apache.org/docs/install/

The current release of thrift does not work, you'll have to use the SVN version.

Unless it has already been integrated you have to apply the patch in this ticket:
https://issues.apache.org/jira/browse/THRIFT-1703

 svn checkout http://svn.apache.org/repos/asf/thrift/trunk thrift-trunk
 cd thrift-trunk
 ./bootstrap.sh
 ./configure --without-java --without-erlang --without-python --without-ruby
 make
 sudo -c "make install"

You'll now have a thrift installed in /usr/local. For the MapQuest Render Stack
you only need the C++ support in thrift. Thats why we have configured it
without the other languages. If you want to use other languages, too, change
the configure call accordingly.


Cassandra Access
----------------

The files in this directory are autogenerated from the "cassandra.thrift" file
in the Cassandra distribution. They are used by the cassandra_storage driver
and should work as is.

If you have to re-generate these files for some reason (for instance a new
cassandra version that changes them), download and unpack the Cassandra
source distribution. Find the "interface" directory inside it and go to it
and then call 

thrift --gen cpp cassandra.thrift


Using the Cassandra Backend
---------------------------

To use the Cassandra storage backend you need to add the configuration to
the tile_handler and worker configurations.

Set the storage type to "cassandra". There are also the following options:

server           The IP address of the Cassandra server (default: 127.0.0.1)
port             The TCP port used by the server (default: 9160)
keyspace_prefix  This string is prefixed to keyspaces names used (default: tiles_)


